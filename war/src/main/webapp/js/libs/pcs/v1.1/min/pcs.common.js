define("pcs/util/loggerUtil",["jquery"],function(e){"use strict";function t(){var e=this;return e.enableLog=!1,{log:function(t){e.enableLog&&console.log(t)},error:function(t){e.enableLog&&console.error(t)},debug:function(t){e.enableLog&&console.debug(t)},warn:function(t){e.enableLog&&console.warn(t)},enableLog:function(){e.enableLog=!0},disableLog:function(){e.enableLog=!1}}}var n=new t;return n}),define("pcs/util/pcsUtil",["module","knockout","ojs/ojcore","jquery","pcs/util/loggerUtil"],function(e,t,n,r,o){"use strict";function i(){var e,t={};if(-1===window.location.href.indexOf("?"))return t;for(var n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<n.length;r++){e=n[r].split("=");var o=decodeURIComponent(e[0]),i=decodeURIComponent(e[1]),a=JSON.parse(i);t[o]=a}return t}var a={};r.CustomEvent=function(e){var t,n=e&&a[e];return n||(t=r.Callbacks(),n={publish:t.fire,subscribe:t.add,unsubscribe:t.remove},e&&(a[e]=n)),n},function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return"function"==typeof window.CustomEvent?!1:(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}();var c={addHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},removeHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}};String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,value:function(e,t){return t=t||0,this.substr(t,e.length)===e}}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{enumerable:!1,value:function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return-1!==r&&r===t}});var s=function(e){"function"==typeof window.doADFProxyCall?window.doADFProxyCall(e):e&&window.location.assign(e)},u=function(e){function t(e){for(var t=e.split("\r\n"),n="text/plain",r="pcsFormUrl",o={contentType:n,fieldName:r},i=1;i<t.length;i++){var a=t[i],c=a.match(/^.*filename="([^"]*)"/);if(c)o.fieldName=c[1];else{var s="Content-Type:";a.indexOf(s)>-1&&(c=a.substring(a.indexOf(s)+s.length)),c&&(o.contentType=c.trim())}}return o}var n=e.getResponseHeader("Content-Type"),r=e.response,o=n.match(/boundary=(?:'([^']+)'|([^;]+))/i);if(!o)throw new Error("Bad content-type header, no multipart boundary");var i,a,c=o[1]||o[2],s="string"!=typeof r;if(c="\r\n--"+c,s){var u=new Uint8Array(r),p=32768,l=[];for(a=0;a<u.length;a+=p)l.push(String.fromCharCode.apply(null,u.subarray(a,a+p)));i=l.join("")}else i=r;i="\r\n"+i;var d=i.split(new RegExp(c)),f={};for(a=1;a<d.length-1;a++){var v="\r\n\r\n",h=d[a].substring(d[a].indexOf(v)+v.length),g=d[a].substring(0,d[a].indexOf(v)),y=t(g),m=!1;s&&!y.contentType.startsWith("text")&&(m=!0),f[y.fieldName]={data:h,contentType:y.contentType,fileName:y.fieldName}}return f},p=function(e){return r.ajax({type:"GET",url:e,dataType:"text",xhrFields:{withCredentials:!0}})};return{adfProxyCall:s,getAuthToken:p,multipartParse:u,getUrlParametersObject:i,eventHandler:c,initComponentForIFrame:function(e,t,n){if(r.isEmptyObject(r.pcsConnection)){if(r.pcsConnection={},!r.isEmptyObject(e)&&(e.testMode&&(r.pcsConnection.testMode=e.testMode),e.serverURL&&(r.pcsConnection.serverURL=e.serverURL),e.authInfo))return r.pcsConnection.authInfo=e.authInfo,void t();var i=this,a=function(){var e=i.getServerURL();o.log("Script loaded and ready, getting token"),i.getAuthToken(e+"/ic/process/workspace/auth/token").done(function(e){e&&e.startsWith("<html")?n.text("User cannot be authorized").show():(r.pcsConnection.authInfo="Bearer "+e,t())}).fail(function(e){n.text("User cannot be authorized").show()})},c=document.createElement("script");c.onload=a,c.onreadystatechange=function(){"complete"===this.readyState&&a()};var s=this.getServerURL();c.src=s+"/ic/process/workspace/faces/js/homePage.js",document.getElementsByTagName("head")[0].appendChild(c)}else t()},getCookie:function(e){var t;return(t=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?t[1]:null},storeLoggedInUser:function(e){r.pcsConnection.isAdmin=e.adminFlag,r.pcsConnection.isProcessOwner=!1,e.roles&&e.roles.items&&r.each(e.roles.items,function(e,t){return t.id.endsWith(".ProcessOwner")?(r.pcsConnection.isProcessOwner=!0,!1):void 0})},getServerURL:function(){if(r.pcsConnection&&r.pcsConnection.serverURL)return r.pcsConnection.serverURL.endsWith("/")?r.pcsConnection.serverURL.substring(0,r.pcsConnection.serverURL.length-1):r.pcsConnection.serverURL;var e=window.location.origin;return r.pcsConnection||(r.pcsConnection={}),r.pcsConnection.serverURL=e,e},getRestUri:function(){return"/bpm/api/4.0/"},getAuthInfo:function(){if(r.pcsConnection&&r.pcsConnection.authInfo){var e=r.pcsConnection.authInfo;return e.startsWith("Bearer ")||e.startsWith("Basic ")||(e="Bearer "+e),e}return""},getRestURL:function(){if(r.pcsConnection&&r.pcsConnection.restURL)return r.pcsConnection.restURL;var e=this.getServerURL()+this.getRestUri();return r.pcsConnection&&(r.pcsConnection.restURL=e),e},getDpServerURL:function(){return r.pcsConnection&&r.pcsConnection.dpServerURL?r.pcsConnection.dpServerURL.endsWith("/")?r.pcsConnection.dpServerURL.substring(0,r.pcsConnection.dpServerURL.length-1):r.pcsConnection.dpServerURL:this.getServerURL()},getDpRestURL:function(){var e=this.getDpServerURL()+"/bpm/api/4.0/";return e},beforeRequestCallback:function(e,t){t.adfProxyCall();var n=t.getAuthInfo();n&&e.setRequestHeader("Authorization",n),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev");var r=requirejs.s.contexts._.config.locale;r&&e.setRequestHeader("Accept-Language",r)},isTestMode:function(){return r.pcsConnection&&r.pcsConnection.testMode?!0:!1},taskIconColor:function(e){var t=["#6e8598","#754b9a","#45ac62","#ed813d","#3f92d0","#E85E93","#81BB5F","#DFE146","#FABC39","#EB5B60","#1FB4AD","#00B6D1"];if(!e)return"grey";var n,r,o,i=0;for(n=0,o=e.length;o>n;n++)r=e.charCodeAt(n),i=(i<<5)-i+r,i|=0;var a=i%t.length;return t[Math.abs(a)]},taskInitials:function(e){if(!e)return"NA";e=e.replace(" ","");for(var t=e.charAt(0).toUpperCase(),n="",r=1;r<e.length;r++)if(e.charAt(r)===e.charAt(r).toUpperCase()){n=e.charAt(r);break}return t+n},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},unApplyBindings:function(e,n){e.find("*").each(function(){r(this).off(),r(this).unbind()}),e.off(),n?(t.cleanNode(e[0]),e.find("*").each(function(){r(this).remove()}),t.removeNode(e)):(t.cleanNode(e),e.find("*").each(function(){r(this).remove()}))},compositeVersion:function(e){var t;if(e)try{var n=e.split("!"),r=n[1].split("*");t=r[0]}catch(i){o.error("Error while getting version")}return t},applicationName:function(e){var t;if(e)try{var n=e.split("~"),r=n[1].split("*");t=r[0]}catch(i){o.error("Error while getting application Name")}return t}}}),define("pcs/util/dateUtil",["knockout","ojs/ojcore","jquery","ojs/ojdatetimepicker"],function(e,t,n){"use strict";var r=function(e){if(!e)return"";var t="",n=Math.abs(e)/1e3,r=Math.floor(n/86400);n-=86400*r,t=r>0?t+r+"d ":t;var o=Math.floor(n/3600)%24;n-=3600*o,t=o>0?t+o+"h ":t;var i=Math.floor(n/60)%60;if(n-=60*i,t=i>0?t+i+"m":t,""===t){var a=Math.floor(n);t=a+"s"}return t},o=function(e){if(!e)return null;var n;if("string"==typeof e||"number"==typeof e)n=new Date(e);else{if(!(e instanceof Date))return e;n=e}var r=t.IntlConverterUtils.dateToLocalIso(n);return r},i=function(e,n){if(!e||""===e)return"";var r=n?n:"MMM dd yyyy, hh:mm a",o={pattern:r},i=t.Validation.converterFactory(t.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter(o);return i.format(e)},a=function(e){var t;if("string"==typeof e||"number"==typeof e)t=new Date(e);else{if(!(e instanceof Date))return e.toString();t=e}return t=t.toISOString()};return e.bindingHandlers.pcsFormatDate={update:function(t,n,r){var o=e.unwrap(n());if(o){var a=i(o,r().datePattern);e.bindingHandlers.text.update(t,function(){return a})}}},{getTimeDurationTxt:r,getDateInUserTimezone:o,getFormattedDate:i,getDateStingInUTCTimezone:a}}),define("pcs/util/PropertyChangeHelper",["jquery"],function(e){"use strict";var t=function(t,n,r){var o=n+"-changed";e(t).on(o,function(e){"external"===e.detail.updatedFrom&&r(e.detail.value)})};return{observe:t}}),define("pcs/data-services/DataServices",["require","jquery","pcs/util/pcsUtil"],function(e){"use strict";var t=e("jquery"),n=e("pcs/util/pcsUtil");return function(){function e(){return{get:function(e,r,a){if(-1===e.indexOf(o(a))&&(e=o(a)+e),r&&r.queryParams){var c=t.param(r.queryParams,!0);e+="?"+c}return n.adfProxyCall(),t.ajax({type:"GET",url:e,beforeSend:i,xhrFields:{withCredentials:!0},contentType:r&&r.contentType?r.contentType:"application/json",dataType:r&&r.dataType?r.dataType:"json"})},post:function(e,r,c){-1===e.indexOf(o(c))&&(e=o(c)+e),r.contentType||(r.contentType="application/json");var s=a(r.contentType,r.payload);return n.adfProxyCall(),t.ajax({type:"POST",url:e,cache:!1,processData:!1,data:s,beforeSend:i,xhrFields:{withCredentials:!0},contentType:r&&r.contentType?r.contentType:"application/json",dataType:r&&r.dataType?r.dataType:"json"})},put:function(e,r,c){-1===e.indexOf(o(c))&&(e=o(c)+e),r.contentType||(r.contentType="application/json");var s=a(r.contentType,r.payload);return n.adfProxyCall(),t.ajax({type:"PUT",url:e,cache:!1,processData:!1,data:s,beforeSend:i,xhrFields:{withCredentials:!0},contentType:r&&r.contentType?r.contentType:"application/json",dataType:r&&r.dataType?r.dataType:"json"})},"delete":function(e,r,a){return-1===e.indexOf(o(a))&&(e=o(a)+e),n.adfProxyCall(),t.ajax({type:"DELETE",url:e+"/"+r.payload,beforeSend:i,xhrFields:{withCredentials:!0},contentType:r&&r.contentType?r.contentType:"application/json",cache:!1,processData:!1})}}}var r,o=function(e){return e&&"dp"===e?n.getDpServerURL()+"/bpm/api/4.0":e?n.getServerURL()+"/bpm/api/"+e:n.getServerURL()+"/bpm/api/4.0"},i=function(e){n.beforeRequestCallback(e,n)},a=function(e,t){var n=JSON.stringify(t);if(!e&&e.startsWith("multipart")){n=new Uint8Array(t.length);for(var r=0;r<t.length;r++)n[r]=t.charCodeAt(r)}return n};return{getInstance:function(t){return r||(r=e()),t&&(r.connection=t),r},setConnection:function(t){r||(r=e()),r.connection=t}}}()}),define("pcs/pcs.common",["pcs/util/pcsUtil","pcs/util/dateUtil","pcs/util/loggerUtil","pcs/util/PropertyChangeHelper","pcs/data-services/DataServices"],function(e){"use strict"});
//# sourceMappingURL=pcs.common.js.map