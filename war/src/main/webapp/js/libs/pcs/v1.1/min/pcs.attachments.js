define("text",["module"],function(e){"use strict";function t(e,t){return void 0===e||""===e?t:e}function n(e,n,a,o){if(n===o)return!0;if(e===a){if("http"===e)return t(n,"80")===t(o,"80");if("https"===e)return t(n,"443")===t(o,"443")}return!1}var a,o,s,i,r,c=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,d=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,p="undefined"!=typeof location&&location.href,m=p&&location.protocol&&location.protocol.replace(/\:/,""),h=p&&location.hostname,u=p&&(location.port||void 0),f={},v=e.config&&e.config()||{};return a={version:"2.0.15",strip:function(e){if(e){e=e.replace(l,"");var t=e.match(d);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:v.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=c[t];try{e=new ActiveXObject(n)}catch(a){}if(e){c=[n];break}}return e},parseName:function(e){var t,n,a,o=!1,s=e.lastIndexOf("."),i=0===e.indexOf("./")||0===e.indexOf("../");return-1!==s&&(!i||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,a=n||t,s=a.indexOf("!"),-1!==s&&(o="strip"===a.substring(s+1),a=a.substring(0,s),n?n=a:t=a),{moduleName:t,ext:n,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,o,s){var i,r,c,l=a.xdRegExp.exec(e);return l?(i=l[2],r=l[3],r=r.split(":"),c=r[1],r=r[0],(!i||i===t)&&(!r||r.toLowerCase()===o.toLowerCase())&&(!c&&!r||n(i,c,t,s))):!0},finishLoad:function(e,t,n,o){n=t?a.strip(n):n,v.isBuild&&(f[e]=n),o(n)},load:function(e,t,n,o){if(o&&o.isBuild&&!o.inlineText)return void n();v.isBuild=o&&o.isBuild;var s=a.parseName(e),i=s.moduleName+(s.ext?"."+s.ext:""),r=t.toUrl(i),c=v.useXhr||a.useXhr;return 0===r.indexOf("empty:")?void n():void(!p||c(r,m,h,u)?a.get(r,function(t){a.finishLoad(e,s.strip,t,n)},function(e){n.error&&n.error(e)}):t([i],function(e){a.finishLoad(s.moduleName+"."+s.ext,s.strip,e,n)}))},write:function(e,t,n,o){if(f.hasOwnProperty(t)){var s=a.jsEscape(f[t]);n.asModule(e+"!"+t,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,t,n,o,s){var i=a.parseName(t),r=i.ext?"."+i.ext:"",c=i.moduleName+r,l=n.toUrl(i.moduleName+r)+".js";a.load(c,n,function(t){var n=function(e){return o(l,e)};n.asModule=function(e,t){return o.asModule(e,l,t)},a.write(e,c,n,s)},s)}},"node"===v.env||!v.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(o=require.nodeRequire("fs"),a.get=function(e,t,n){try{var a=o.readFileSync(e,"utf8");"\ufeff"===a[0]&&(a=a.substring(1)),t(a)}catch(s){n&&n(s)}}):"xhr"===v.env||!v.env&&a.createXhr()?a.get=function(e,t,n,o){var s,i=a.createXhr();if(i.open("GET",e,!0),o)for(s in o)o.hasOwnProperty(s)&&i.setRequestHeader(s.toLowerCase(),o[s]);v.onXhr&&v.onXhr(i,e),i.onreadystatechange=function(a){var o,s;4===i.readyState&&(o=i.status||0,o>399&&600>o?(s=new Error(e+" HTTP status: "+o),s.xhr=i,n&&n(s)):t(i.responseText),v.onXhrComplete&&v.onXhrComplete(i,e))},i.send(null)}:"rhino"===v.env||!v.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?a.get=function(e,t){var n,a,o="utf-8",s=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),o)),c="";try{for(n=new java.lang.StringBuffer,a=r.readLine(),a&&a.length()&&65279===a.charAt(0)&&(a=a.substring(1)),null!==a&&n.append(a);null!==(a=r.readLine());)n.append(i),n.append(a);c=String(n.toString())}finally{r.close()}t(c)}:("xpconnect"===v.env||!v.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(s=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in s,a.get=function(e,t){var n,a,o,c={};r&&(e=e.replace(/\//g,"\\")),o=new FileUtils.File(e);try{n=s["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(o,1,0,!1),a=s["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),a.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),c),a.close(),n.close(),t(c.value)}catch(l){throw new Error((o&&o.path||"")+": "+l)}}),a}),define("text!pcs/attachments/templates/pcs-attachments.html",[],function(){return"<div data-bind='component: {\n    name: \"attachmentComponent\",\n	params : {data : data}\n}'></div>\n"}),function(){function e(e,t,n,a,o,s){return t[e]||(e=e.replace(/^zh-(Hans|Hant)-([^-]+)$/,"zh-$2")),t[e]?(n.push(e),!0!==t[e]&&1!==t[e]||a.push(o+e+"/"+s),!0):!1}function t(e){var t=e.toLowerCase().split(/-|_/);e=[t[0]];var n,a=1;for(n=1;n<t.length;n++){var o=t[n],s=o.length;if(1==s)break;switch(a){case 1:if(a=2,4==s){e.push(o.charAt(0).toUpperCase()+o.slice(1));break}case 2:a=3,e.push(o.toUpperCase());break;default:e.push(o)}}return"zh"!=e[0]||1<e.length&&4==e[1].length||(t="Hans",a=1<e.length?e[1]:null,("TW"===a||"MO"===a||"HK"===a)&&(t="Hant"),e.splice(1,0,t)),e}function n(e,t){for(var a in t)t.hasOwnProperty(a)&&(null==e[a]?e[a]=t[a]:"object"==typeof t[a]&&"object"==typeof e[a]&&n(e[a],t[a]))}var a=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("ojL10n",["module"],function(o){var s=o.config?o.config():{};return{version:"2.0.1+",load:function(o,i,r,c){c=c||{},c.locale&&(s.locale=c.locale);var l,d,p,m,h,u,f,v,g,b=a.exec(o),y=b[1],w=b[5],x=[],L={},j="";for(b[5]?(y=b[1],o=y+w,l=b[4]):(w=b[4],l=s.locale,"undefined"!=typeof document?(l||(l=c.isBuild?"root":document.documentElement.lang)||(l=void 0===navigator?"root":navigator.language||navigator.userLanguage||"root"),s.locale=l):l="root"),d=t(l),m=s.noOverlay,h=s.defaultNoOverlayLocale,(b=s.merge)&&(u=b[y+w])&&(b=a.exec(u),f=b[1],v=b[4]),g=[],b=0;b<d.length;b++)p=d[b],j+=(j?"-":"")+p,g.push(j);c.isBuild?(x.push(o),u&&x.push(u),i(x,function(){r()})):("query"==s.includeLocale&&(o=i.toUrl(o+".js"),o+=(-1===o.indexOf("?")?"?":"&")+"loc="+l),c=[o],u&&c.push(u),i(c,function(t,a){var o=[],s=function(t,n,a){for(var s=m||!0===t.__noOverlay,i=h||t.__defaultNoOverlayLocale,r=!1,c=g.length-1;c>=0&&(!r||!s);c--)r=e(g[c],t,o,x,n,a);c=1===g.length&&"root"===g[0],s&&(c||!r)&&i&&e(i,t,o,x,n,a),c||e("root",t,o,x,n,a)};s(t,y,w);var c=o.length;a&&s(a,f,v),i(x,function(){var e=function(e,t,a,s,r){for(;a>t&&o[t];t++){var c=o[t],l=e[c];(!0===l||1===l)&&(l=i(s+c+"/"+r)),n(L,l)}};e(a,c,o.length,f,v),e(t,0,c,y,w),L._ojLocale_=d.join("-"),r(L)})}))}}})}(),define("pcs/resources/nls/pcsSnippetsResource",{root:!0,de:!0,es:!0,fr:!0,it:!0,ja:!0,ko:!0,pt:!0,"zh-Hans":!0,"zh-Hant":!0}),define("text!pcs/attachments/templates/pcs-attachments-error.html",[],function(){return'<div class="oj-message oj-message-error">\n    <span class="oj-component-icon oj-message-status-icon oj-message-error-icon"\n          role="img">\n    </span>\n    <span class="oj-message-content">\n        <div class="oj-message-summary">\n            Required parameters are missing\n        </div>\n        <div class="oj-message-detail">\n            <span>This component requires these values -</span>\n            <pre>\n    *id : \'\'\n    </pre>\n        </div>\n    </span>\n</div>\n'}),define("text!pcs/attachments/view/attachmentsContainer.html",[],function(){return'<div class="oj-margin pcs-attachments-detailBox">\n\n	<div data-bind="if:showAttachments() && showDcsFolders()">\n		<div class="oj-flex oj-sm-flex-items-initial">\n			<div class="oj-flex-item pcs-attachments-caret-icon"  role="img" data-bind="attr:{title:bundle.pcs.attachments.foldersText}"></div>\n			<div class="oj-flex-item pcs-attachments-folders-text"><a href="#" data-bind="click : closeFolder,text:bundle.pcs.attachments.foldersText"></a></div>\n		</div>\n	</div>\n\n	<div data-bind="if:showAttachments()">\n		<div class="oj-flex oj-flex-bar">\n			<div data-bind="ifnot:showDcsFolders" class="pcs-attachments-title oj-flex-bar-start">\n				<label class="pcs-attachments-title" data-bind="text:bundle.pcs.attachments.title"></label>\n			</div>\n			<div data-bind="if:showDcsFolders" class="pcs-attachments-title oj-flex-bar-start">\n				<label class="pcs-attachments-title" data-bind="text:dscSelectedFolderName"></label>\n			</div>\n			<div class="pcs-attachments-uploadLink oj-flex-bar-end" style="padding-right:10px;" data-bind="ifnot:$data.displayDcs()">\n				<a href="#" data-bind="click : openUploadDialog, text:bundle.pcs.attachments.uploadLink"></a>\n			</div>\n		</div>\n	</div>\n	<div id="pcs-attachments-success-msg-container" style="display: none;margin-bottom:20px">\n		<span title="Success" role="img" class="oj-fwk-icon-status-confirmation oj-fwk-icon"></span>\n		<span id="pcs-attachments-success-msg" class="pcs-attachments-success-msg"></span>\n	</div>\n\n	<div id="pcs-attachments-error-msg-container" class="pcs-attachments-error-msg-container"  style="display: none">\n		<span class="oj-component-icon oj-message-status-icon oj-message-error-icon" role="img" id="pcs-attachments-error-msg-icon" style="float: left ;margin-right:10px" ></span>\n		<pre id="pcs-attachments-error-msg" class="pcs-attachments-error-msg"></pre>\n	</div>\n</div>\n\n<div class="pcs-attachments-actionBox oj-panel oj-margin">\n\n\n	<div data-bind="ifnot:showAttachments()">\n		<div class="oj-flex oj-sm-flex-items-initial" data-bind="visible:isDcsFolderVisible">\n\n			<ul class="pcs-attachments-attachmentsList" data-bind="foreach:dcsFolderList ">\n				<li>\n					<div class="oj-flex oj-flex-bar">\n						<div class="oj-flex-bar-start">\n							<!-- ko if:isFolder -->\n							<div class="oj-flex-item pcs-attachments-folder-icon"  role="img" data-bind="attr:{title:$parent.bundle.pcs.attachments.folderText}"></div>\n							<!-- /ko -->\n							<!-- ko ifnot:isFolder -->\n							<div class="oj-flex-item pcs-attachments-file-icon"  role="img" data-bind="attr:{title:$parent.bundle.pcs.attachments.fileText}"></div>\n							<!-- /ko -->\n							<div class="oj-flex-item"><a href="#" data-bind="click : $parent.openFolder,text:folderName"></a></div>\n\n						</div>\n					</div>\n				</li>\n			</ul>\n\n			<div id="pcs-attachments-docs-error"></div>\n		</div>\n		<div class="pcs-attachment-inline-div" data-bind="visible:!isDcsFolderVisible()">\n			<div data-bind="visible:dcsFolderList().length > 1" style="display: none;">\n				<span class="pcs-attachments-folders-back" data-bind="click:showFolders"></span>\n				<a class="pcs-attachments-folders-text" data-bind="click:showFolders , text : bundle.pcs.attachments.foldersText"></a>\n			</div>\n			<div class="pcs-attachment-iframe-inline">\n				<iframe id="pcs-attachment-iframe-inline" style="width: 100%;min-height: 550px" target="_top" data-bind="attr: {src: $data.dscSelectedAppLink}" frameborder="0" seamless="seamless" scrolling="auto">\n					<p>Your browser does not support iframes.</p>\n				</iframe>\n			</div>\n\n		</div>\n	</div>\n\n	<div data-bind="if:showAttachments()">\n\n		<!-- ko ifnot: $data.displayDcs() -->\n		<div data-bind="if:attachmentList().length == 0">\n			<span data-bind="text:bundle.pcs.attachments.noItemsText"></span>\n		</div>\n\n		<ul class="pcs-attachments-attachmentsList" data-bind="foreach:attachmentList ">\n			<li>\n				<div class="oj-flex oj-flex-bar">\n					<div class="oj-flex-bar-start">\n						<div data-bind="attr:{class:$parent.iconClass(filename, contentType)}">\n							<span>&nbsp;&nbsp;</span>\n						</div>\n						<div class="pcs-attachments-text">\n							<a data-bind="attr :{href:href , download : filename }, click:$parent.viewAttachment" target="_blank">\n								<p class="">\n									<span data-bind="text: filename"></span>\n								</p>\n							</a>\n							<span class="date pcs-attachments-sub-text">\n								<span data-bind="text: fileInfoText"></span>\n							</span>\n						</div>\n					</div>\n					<div class="pcs-attachments-removeFile oj-flex-bar-end">\n						<a href="#" data-bind="click:$parent.removeFileFromList">\n							<span class="oj-icon pcs-attachments-remove-icon" role="img" data-bind="attr:{title:$parent.bundle.pcs.attachments.removeFile}"></span>\n						</a>\n					</div>\n\n					<div style="display:none"  class="pcs-attachments-delete-dialog"\n						 data-bind="attr : { title : $parent.bundle.pcs.attachments.dialog_confirm}, ojComponent:{component: \'ojDialog\', initialVisibility: \'hide\'}">\n						<div class="oj-dialog-body">\n							<div data-bind="text : $parent.bundle.pcs.attachments.dialog_discard_msg"/>\n						</div>\n						<div class="oj-dialog-footer">\n							<button\n									data-bind="click : $parent.yesDeleteDialog ,\n                    ojComponent: {component: \'ojButton\', label: $parent.bundle.pcs.attachments.dialog_yes}"></button>\n							<button\n									data-bind="click : $parent.noDeleteDialog ,\n                    ojComponent: {component: \'ojButton\', label: $parent.bundle.pcs.attachments.dialog_no}"></button>\n						</div>\n					</div>\n				</div>\n				<hr/>\n			</li>\n		</ul>\n		<!-- /ko -->\n	</div>\n	<div id="pcs-attachments-overlay"/>\n\n</div>\n\n<div style="display:none" class="pcs-attachments-modalDialog"\n	 data-bind="attr: {title: bundle.pcs.attachments.uploadDialogTitle},\n	 ojComponent:{\n		component: \'ojDialog\',\n		initialVisibility: \'hide\',\n		close: handleDialogClose,\n		rootAttributes: { style: \'width: 500px; min-width: 200px; max-width 500px;\'}\n	 }">\n	<div class="oj-dialog-body oj-form">\n		<div class="oj-flex">\n			<div class="oj-flex-item">\n				<div data-bind="ifnot:showDcsFolders">\n					<div class="pcs-attachments-note-txt" data-bind="text:bundle.pcs.attachments.uploadSizeLimitText"></div>\n				</div>\n				<div data-bind="if:showDcsFolders">\n					<div class="pcs-attachments-note-txt" data-bind="text:bundle.pcs.attachments.docsUploadSizeLimitText"></div>\n				</div>\n				<div class="pcs-attachments-error-txt" data-bind="visible:isSizeLimitExceeding, text:bundle.pcs.attachments.fileSizeExceeded"></div>\n			</div>\n		</div>\n		<div class="oj-flex pcs-attachments-dialog-error-msg">\n			<span class="oj-fwk-icon oj-fwk-icon-status-error oj-flex-item"></span>\n			<span class="oj-flex-item" data-bind="text: bundle.pcs.attachments.fileExists"></span>\n		</div>\n		<div class="oj-flex oj-sm-odd-cols-12 oj-md-odd-cols-4 oj-md-labels-inline\n			 oj-form-cols-labels-inline oj-form-cols-max2">\n			<div class="oj-flex-item">\n				<label for="pcs-attachments-fileControl" data-bind="text:bundle.pcs.attachments.browseToUploadLabel"></label>\n			</div>\n			<div class="oj-flex-item">\n				<input id="pcs-attachments-fileControl" type="file" class="pcs-attach-file-name"  title="Upload file" style="float:left;" />\n				<div class="pcs-empty-file-name-text" style="display: none;color:red;clear: both;" class="text-error" data-bind="text:bundle.pcs.attachments.emptyAddFileText"></div>\n			</div>\n		</div>\n	</div>\n	<div class="oj-dialog-footer">\n		<button class="pcs-attachments-upload-btn"\n				data-bind="click: uploadAttachment, ojComponent: {component: \'ojButton\', label: bundle.pcs.attachments.upload, disabled : \'true\'} , attr : { title : bundle.pcs.attachments.upload}"> </button>\n	</div>\n</div>\n\n<div style="display:none" class="pcs-attachments-dcsModalDialog"\n	   data-bind="attr: {title: bundle.pcs.attachments.documents_dialog_title}, ojComponent:{component: \'ojDialog\', initialVisibility: \'hide\', close :dcsDialogClose, rootAttributes: { style: \'width: 800px; min-width: 300px; max-width 800px;\'}}">\n	<div class="oj-dialog-body" style="height:600px">\n		<iframe id="pcs-attachment-iframe" target="_top" data-bind="attr: {src: $data.dscSelectedAppLink}" frameborder="0" seamless="seamless" scrolling="auto"\n				style="overflow-x:hidden; width:100%;" height=550px" >\n			<p>Your browser does not support iframes.</p>\n		</iframe>\n\n	</div>\n\n</div>\n'}),define("pcs/util/loggerUtil",["jquery"],function(e){"use strict";function t(){var e=this;return e.enableLog=!1,{log:function(t){e.enableLog&&console.log(t)},error:function(t){e.enableLog&&console.error(t)},debug:function(t){e.enableLog&&console.debug(t)},warn:function(t){e.enableLog&&console.warn(t)},enableLog:function(){e.enableLog=!0},disableLog:function(){e.enableLog=!1}}}var n=new t;return n}),define("pcs/util/pcsUtil",["module","knockout","ojs/ojcore","jquery","pcs/util/loggerUtil"],function(e,t,n,a,o){"use strict";function s(){var e,t={};if(-1===window.location.href.indexOf("?"))return t;for(var n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),a=0;a<n.length;a++){e=n[a].split("=");var o=decodeURIComponent(e[0]),s=decodeURIComponent(e[1]),i=JSON.parse(s);t[o]=i}return t}var i={};a.CustomEvent=function(e){var t,n=e&&i[e];return n||(t=a.Callbacks(),n={publish:t.fire,subscribe:t.add,unsubscribe:t.remove},e&&(i[e]=n)),n},function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return"function"==typeof window.CustomEvent?!1:(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}();var r={addHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},removeHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}};String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,value:function(e,t){return t=t||0,this.substr(t,e.length)===e}}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{enumerable:!1,value:function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var a=n.indexOf(e,t);return-1!==a&&a===t}});var c=function(e){"function"==typeof window.doADFProxyCall?window.doADFProxyCall(e):e&&window.location.assign(e)},l=function(e){function t(e){for(var t=e.split("\r\n"),n="text/plain",a="pcsFormUrl",o={contentType:n,fieldName:a},s=1;s<t.length;s++){var i=t[s],r=i.match(/^.*filename="([^"]*)"/);if(r)o.fieldName=r[1];else{var c="Content-Type:";i.indexOf(c)>-1&&(r=i.substring(i.indexOf(c)+c.length)),r&&(o.contentType=r.trim())}}return o}var n=e.getResponseHeader("Content-Type"),a=e.response,o=n.match(/boundary=(?:'([^']+)'|([^;]+))/i);if(!o)throw new Error("Bad content-type header, no multipart boundary");var s,i,r=o[1]||o[2],c="string"!=typeof a;if(r="\r\n--"+r,c){var l=new Uint8Array(a),d=32768,p=[];for(i=0;i<l.length;i+=d)p.push(String.fromCharCode.apply(null,l.subarray(i,i+d)));s=p.join("")}else s=a;s="\r\n"+s;var m=s.split(new RegExp(r)),h={};for(i=1;i<m.length-1;i++){var u="\r\n\r\n",f=m[i].substring(m[i].indexOf(u)+u.length),v=m[i].substring(0,m[i].indexOf(u)),g=t(v),b=!1;c&&!g.contentType.startsWith("text")&&(b=!0),h[g.fieldName]={data:f,contentType:g.contentType,fileName:g.fieldName}}return h},d=function(e){return a.ajax({type:"GET",url:e,dataType:"text",xhrFields:{withCredentials:!0}})};return{adfProxyCall:c,getAuthToken:d,multipartParse:l,getUrlParametersObject:s,eventHandler:r,initComponentForIFrame:function(e,t,n){if(a.isEmptyObject(a.pcsConnection)){if(a.pcsConnection={},!a.isEmptyObject(e)&&(e.testMode&&(a.pcsConnection.testMode=e.testMode),e.serverURL&&(a.pcsConnection.serverURL=e.serverURL),e.authInfo))return a.pcsConnection.authInfo=e.authInfo,void t();var s=this,i=function(){var e=s.getServerURL();o.log("Script loaded and ready, getting token"),s.getAuthToken(e+"/ic/process/workspace/auth/token").done(function(e){e&&e.startsWith("<html")?n.text("User cannot be authorized").show():(a.pcsConnection.authInfo="Bearer "+e,t())}).fail(function(e){n.text("User cannot be authorized").show()})},r=document.createElement("script");r.onload=i,r.onreadystatechange=function(){"complete"===this.readyState&&i()};var c=this.getServerURL();r.src=c+"/ic/process/workspace/faces/js/homePage.js",document.getElementsByTagName("head")[0].appendChild(r)}else t()},getCookie:function(e){var t;return(t=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?t[1]:null},storeLoggedInUser:function(e){a.pcsConnection.isAdmin=e.adminFlag,a.pcsConnection.isProcessOwner=!1,e.roles&&e.roles.items&&a.each(e.roles.items,function(e,t){return t.id.endsWith(".ProcessOwner")?(a.pcsConnection.isProcessOwner=!0,!1):void 0})},getServerURL:function(){if(a.pcsConnection&&a.pcsConnection.serverURL)return a.pcsConnection.serverURL.endsWith("/")?a.pcsConnection.serverURL.substring(0,a.pcsConnection.serverURL.length-1):a.pcsConnection.serverURL;var e=window.location.origin;return a.pcsConnection||(a.pcsConnection={}),a.pcsConnection.serverURL=e,e},getRestUri:function(){return"/bpm/api/4.0/"},getAuthInfo:function(){if(a.pcsConnection&&a.pcsConnection.authInfo){var e=a.pcsConnection.authInfo;return e.startsWith("Bearer ")||e.startsWith("Basic ")||(e="Bearer "+e),e}return""},getRestURL:function(){if(a.pcsConnection&&a.pcsConnection.restURL)return a.pcsConnection.restURL;var e=this.getServerURL()+this.getRestUri();return a.pcsConnection&&(a.pcsConnection.restURL=e),e},getDpServerURL:function(){return a.pcsConnection&&a.pcsConnection.dpServerURL?a.pcsConnection.dpServerURL.endsWith("/")?a.pcsConnection.dpServerURL.substring(0,a.pcsConnection.dpServerURL.length-1):a.pcsConnection.dpServerURL:this.getServerURL()},getDpRestURL:function(){var e=this.getDpServerURL()+"/bpm/api/4.0/";return e},beforeRequestCallback:function(e,t){t.adfProxyCall();var n=t.getAuthInfo();n&&e.setRequestHeader("Authorization",n),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev");var a=requirejs.s.contexts._.config.locale;a&&e.setRequestHeader("Accept-Language",a)},isTestMode:function(){return a.pcsConnection&&a.pcsConnection.testMode?!0:!1},taskIconColor:function(e){var t=["#6e8598","#754b9a","#45ac62","#ed813d","#3f92d0","#E85E93","#81BB5F","#DFE146","#FABC39","#EB5B60","#1FB4AD","#00B6D1"];if(!e)return"grey";var n,a,o,s=0;for(n=0,o=e.length;o>n;n++)a=e.charCodeAt(n),s=(s<<5)-s+a,s|=0;var i=s%t.length;return t[Math.abs(i)]},taskInitials:function(e){if(!e)return"NA";e=e.replace(" ","");for(var t=e.charAt(0).toUpperCase(),n="",a=1;a<e.length;a++)if(e.charAt(a)===e.charAt(a).toUpperCase()){n=e.charAt(a);break}return t+n},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},unApplyBindings:function(e,n){e.find("*").each(function(){a(this).off(),a(this).unbind()}),e.off(),n?(t.cleanNode(e[0]),e.find("*").each(function(){a(this).remove()}),t.removeNode(e)):(t.cleanNode(e),e.find("*").each(function(){a(this).remove()}))},compositeVersion:function(e){var t;if(e)try{var n=e.split("!"),a=n[1].split("*");t=a[0]}catch(s){o.error("Error while getting version")}return t},applicationName:function(e){var t;if(e)try{var n=e.split("~"),a=n[1].split("*");t=a[0]}catch(s){o.error("Error while getting application Name")}return t}}}),define("pcs/attachments/services/attachmentsDataService",["jquery","pcs/util/pcsUtil"],function(e,t){"use strict";function n(){var n=this;n.paths={taskAttachmentList:"tasks/{taskId}/attachments",ProcessesAttachmentList:"processes/{processId}/attachments",taskDcsFolderList:"tasks/{taskId}/folders",taskDcsFolderInfo:"tasks/{taskId}/folders/{folderId}",processDcsFolderList:"processes/{id}/folders",processDcsFolderInfo:"processes/{id}/folders/{folderId}",dpDcsFolderList:"dp-instances/{id}/folders",dpDcsFolderInfo:"dp-instances/{id}/folders/{folderId}"};var a=function(e,n,a){var o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&200===o.status&&a(n,o.response)},o.open("GET",e,!0),o.withCredentials=!0,o.responseType="arraybuffer";var s=t.getAuthInfo();return s&&o.setRequestHeader("Authorization",s),t.isTestMode()&&o.setRequestHeader("pcs_mode","dev"),o.send(),o},o=function(e){t.beforeRequestCallback(e,t)},s=function(t){return e.ajax({type:"GET",cache:!1,url:t,beforeSend:o,xhrFields:{withCredentials:!0},contentType:"application/json",dataType:"json"})},i=function(t,n,a){for(var s=new Uint8Array(n.length),i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return e.ajax({type:"POST",url:t,cache:!1,processData:!1,data:s,contentType:a,beforeSend:o,xhrFields:{withCredentials:!0}})},r=function(t,n){return e.ajax({type:"DELETE",url:encodeURI(t),beforeSend:o,xhrFields:{withCredentials:!0},contentType:"application/json",dataType:n})};n.getAttachmentList=function(e,a){var o;return"task"===e?o=t.getRestURL()+n.paths.taskAttachmentList.replace("{taskId}",a):"process"===e&&(o=t.getRestURL()+n.paths.ProcessesAttachmentList.replace("{processId}",a)),s(o)},n.uploadAttachment=function(e,a,o,s){var r;return"task"===e?r=t.getRestURL()+n.paths.taskAttachmentList.replace("{taskId}",a):"process"===e&&(r=t.getRestURL()+n.paths.ProcessesAttachmentList.replace("{processId}",a)),i(r,o,s)},n.deleteAttachment=function(e,a,o){var s;return"task"===e?s=t.getRestURL()+n.paths.taskAttachmentList.replace("{taskId}",a)+"/"+o:"process"===e&&(s=t.getRestURL()+n.paths.ProcessesAttachmentList.replace("{processId}",a)+"/"+o),r(s,"text")},n.getAttachmentStream=function(e,t,n){return a(e,t,n)},n.getDcsFolders=function(e,a){var o;return"task"===e?o=t.getRestURL()+n.paths.taskDcsFolderList.replace("{taskId}",a):"dp"===e?o=t.getDpRestURL()+n.paths.dpDcsFolderList.replace("{id}",a):"process"===e&&(o=t.getDpRestURL()+n.paths.processDcsFolderList.replace("{id}",a)),s(o)},n.getDcsFolderInfo=function(e,a,o){var i;return"task"===e?i=t.getRestURL()+n.paths.taskDcsFolderInfo.replace("{taskId}",a).replace("{folderId}",o):"dp"===e?i=t.getDpRestURL()+n.paths.dpDcsFolderInfo.replace("{id}",a).replace("{folderId}",o):"process"===e&&(i=t.getDpRestURL()+n.paths.processDcsFolderInfo.replace("{id}",a).replace("{folderId}",o)),s(i)}}return new n}),define("pcs/util/dateUtil",["knockout","ojs/ojcore","jquery","ojs/ojdatetimepicker"],function(e,t,n){"use strict";var a=function(e){if(!e)return"";var t="",n=Math.abs(e)/1e3,a=Math.floor(n/86400);n-=86400*a,t=a>0?t+a+"d ":t;var o=Math.floor(n/3600)%24;n-=3600*o,t=o>0?t+o+"h ":t;var s=Math.floor(n/60)%60;if(n-=60*s,t=s>0?t+s+"m":t,""===t){var i=Math.floor(n);t=i+"s"}return t},o=function(e){if(!e)return null;var n;if("string"==typeof e||"number"==typeof e)n=new Date(e);else{if(!(e instanceof Date))return e;n=e}var a=t.IntlConverterUtils.dateToLocalIso(n);return a},s=function(e,n){if(!e||""===e)return"";var a=n?n:"MMM dd yyyy, hh:mm a",o={pattern:a},s=t.Validation.converterFactory(t.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter(o);return s.format(e)},i=function(e){var t;if("string"==typeof e||"number"==typeof e)t=new Date(e);else{if(!(e instanceof Date))return e.toString();t=e}return t=t.toISOString()};return e.bindingHandlers.pcsFormatDate={update:function(t,n,a){var o=e.unwrap(n());if(o){var i=s(o,a().datePattern);e.bindingHandlers.text.update(t,function(){return i})}}},{getTimeDurationTxt:a,getDateInUserTimezone:o,getFormattedDate:s,getDateStingInUTCTimezone:i}}),define("pcs/attachments/viewModel/attachmentsContainer",["ojs/ojcore","knockout","pcs/util/pcsUtil","pcs/attachments/services/attachmentsDataService","pcs/util/dateUtil","ojs/ojknockout","ojs/ojdialog","ojs/ojbutton","!text!pcs/attachments/view/attachmentsContainer.html","ojL10n!pcs/resources/nls/pcsSnippetsResource"],function(e,t,n,a,o){"use strict";function s(s){function i(e){if(e){b.displayDcs(!0);for(var t=0;t<e.length;t++){var n={folderId:e[t].folderId,folderName:e[t].folderName};e[t].type&&"d"===e[t].type?n.isFolder=!1:n.isFolder=!0,b.dcsFolderList.unshift(n)}if(1===e.length&&b.data.showDocsInline){var n=b.dcsFolderList()[0];n.isFolder&&b.openFolder(n)}}$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay"),b.rootElement.trigger("attachments:loaded")}function r(e,t){var n=t;e&&0===e.status&&(n=b.bundle.pcs.common.server_not_reachable),e&&500===e.status?n=b.bundle.pcs.common.internal_server_err:e&&401===e.status&&(n=b.bundle.pcs.common.access_error_msg),$("#pcs-attachments-error-msg",b.rootElement).text(n),$("#pcs-attachments-error-msg-container",b.rootElement).show().delay(5e3),$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay")}function c(n){if(n)for(var a=0;a<n.length;a++){var s="",i=o.getDateInUserTimezone(n[a].updatedDate),r=o.getFormattedDate(i);n[a].updatedDate&&n[a].updatedBy&&(s=b.bundle.pcs.attachments.dateByUserText,s=e.Translations.applyParameters(s,{0:r,1:n[a].updatedBy}));var c={filename:decodeURI(n[a].title||n[a].attachmentName||n),fileInfoText:s,serverUri:n[a].uri.href,href:t.observable("#"),contentType:n[a].mimeType};b.attachmentList.unshift(c)}$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay"),b.rootElement.trigger("attachments:loaded")}function l(e,t){b.displayDcs(!1),a.getAttachmentList(e,t).done(function(e){c(e.items)}).fail(function(e,t,n){var a=b.bundle.pcs.attachments.fetch_attachments_error;r(e,a),b.rootElement.trigger("attachments:loaded")})}function d(e,t){f(),a.getDcsFolders(e,t).done(function(e){i(e.items)}).fail(function(e,t,n){var a=b.bundle.pcs.attachments.fetch_attachments_error;r(e,a),b.rootElement.trigger("attachments:loaded")})}function p(e,t){"task"===e?($("#pcs-attachments-overlay").addClass("pcs-common-load-overlay"),b.data.isDocsEnabled?d(e,t):l(e,t)):"process"===e?($("#pcs-attachments-overlay").addClass("pcs-common-load-overlay"),b.data.isDocsEnabled?d(e,t):l(e,t)):"dp"===e&&($("#pcs-attachments-overlay").addClass("pcs-common-load-overlay"),b.data.isDocsEnabled?(f(),a.getDcsFolders(e,t).done(function(e){e.isDocsEnabledFlag?i(e.folders):($("#pcs-attachments-docs-error",b.rootElement).text("Documents are not enabled for this instance."),$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay"))}).fail(function(e,t,n){$("#pcs-attachments-docs-error",b.rootElement).text("You do not have access to the documents"),$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay")})):($("#pcs-attachments-docs-error",b.rootElement).text("You do not have access to the documents"),$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay")))}function m(e){$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay"),b.data.showDocsInline?b.isDcsFolderVisible(!1):$(".pcs-attachments-dcsModalDialog").ojDialog("open"),b.msg={message:"setAppLinkTokens",appLinkRefreshToken:JSON.parse(e).refreshToken,appLinkAccessToken:JSON.parse(e).accessToken,appLinkRoleName:JSON.parse(e).role,embedPreview:!0};var t=JSON.parse(e).appLinkUrl+"/cfg=hbr,evw,hdc,ndw";b.dscSelectedAppLink(t)}function h(e){if("appLinkReady"===e.data.message){y.log("recieved");var t=b.data.showDocsInline?$("#pcs-attachment-iframe-inline")[0]:$("#pcs-attachment-iframe")[0],n=t.contentWindow?t.contentWindow:t.contentDocument.defaultView;n.postMessage(b.msg,"*")}}function u(){y.log("removing"),n.eventHandler.removeHandler(window,"message",h)}function f(){y.log("adding"),n.eventHandler.addHandler(window,"message",h)}function v(e){e.height(e.height());e[0].offsetHeight}function g(e){for(var t=new Uint8Array(e),n=32768,a=[],o=0;o<t.length;o+=n)a.push(String.fromCharCode.apply(null,t.subarray(o,o+n)));return a.join("")}var b=this;this.data=s.data;var y=require("pcs/util/loggerUtil");if(b.bundle=require("ojL10n!pcs/resources/nls/pcsSnippetsResource"),b.attachmentList=t.observableArray([]),b.dcsFolderList=t.observableArray([]),b.isDcsFolderVisible=t.observable(!0),b.showDcsFolders=t.observable(!1),b.showAttachments=t.observable(!0),b.dscSelectedFolderName=t.observable(""),b.dscSelectedAppLink=t.observable(""),b.displayDcs=t.observable(!1),b.isSizeLimitExceeding=t.observable(!1),!b.data.showDocsInline||b.data.showDocsInline!==!0&&"true"!==b.data.showDocsInline?b.data.showDocsInline=!1:b.data.showDocsInline=!0,this.data.isDocsEnabled?(b.showDcsFolders(!0),b.showAttachments(!1)):(b.showDcsFolders(!1),b.showAttachments(!0)),
""!==this.data.startFolderName&&"task"!==this.data.mode&&"process"!==this.data.mode){b.displayDcs(!1);var w={folderId:"",folderName:this.data.startFolderName,isFolder:!0};b.dcsFolderList.unshift(w)}this.data.container=b,this.rootElement=b.data.rootElement,b.data.hideDelete&&$(".pcs-attachments-removeFile",b.rootElement).hide(),b.data.hideUploadLink&&$(".pcs-attachments-uploadLink",b.rootElement).hide(),b.data.hideTitle&&$(".pcs-attachments-title",b.rootElement).hide(),"task"===b.data.mode||"process"===b.data.mode||"dp"===b.data.mode?p(b.data.mode,b.data.id):b.rootElement.trigger("attachments:loaded"),b.openUploadDialog=function(){$(".pcs-attachments-dialog-error-msg").css("display","none"),$("#pcs-attachments-fileControl",this.element).val(""),$(".pcs-attachments-modalDialog").ojDialog("open"),$(".pcs-attachments-upload-btn").ojButton("option","disabled",!0)},b.openFolder=function(e){b.dscSelectedFolderName(e.folderName),"task"!==b.data.mode&&"dp"!==b.data.mode&&"process"!==b.data.mode||""===e.folderId?b.showAttachments(!0):($("#pcs-attachments-overlay").addClass("pcs-common-load-overlay"),a.getDcsFolderInfo(b.data.mode,b.data.id,e.folderId).done(function(e){m(e.appLink)}).fail(function(e,t,n){var a=b.bundle.pcs.attachments.fetch_attachments_error;r(e,a)}))},b.dcsDialogClose=function(){y.log("closing")},b.closeFolder=function(){b.showAttachments(!1)},b.showFolders=function(){b.isDcsFolderVisible(!0)},b.iconClass=function(e,t){return e?"application/pdf"===t?"pcs-attachments-filepdf-icon":"application/zip"===t?"pcs-attachments-filezip-icon":t&&t.startsWith("image")?"pcs-attachments-fileimage-icon":"text/plain"===t?"pcs-attachments-filetxt-icon":e.endsWith("xls")||e.endsWith("xlsx")?"pcs-attachments-filexls-icon":e.endsWith("doc")||e.endsWith("docx")?"pcs-attachments-filedoc-icon":e.endsWith("ppt")||e.endsWith("pptx")?"pcs-attachments-fileppt-icon":"pcs-attachments-fileother-icon":void 0},b.removeFileFromList=function(e,t){var n=$(t.currentTarget).parent();n.siblings().find(".pcs-attachments-delete-dialog").ojDialog("open")},b.yesDeleteDialog=function(t){if("task"===b.data.mode||"process"===b.data.mode){var n=t.filename,o=t;$("#pcs-attachments-overlay").addClass("pcs-common-load-overlay"),a.deleteAttachment(b.data.mode,b.data.id,n).done(function(t){b.attachmentList.remove(o),b.rootElement.trigger("attachments:attachmentRemoved",[o]),$(".pcs-attachments-delete-dialog").ojDialog("close");var a=b.bundle.pcs.attachments.upload_attachment_delete;a=e.Translations.applyParameters(a,{0:n}),$("#pcs-attachments-success-msg",b.rootElement).text(a),$("#pcs-attachments-success-msg-container",b.rootElement).show().delay(5e3).fadeOut(2e3),$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay")}).fail(function(e,t,n){var a=b.bundle.pcs.attachments.delete_attachment_error;r(e,a)})}else b.attachmentList.remove(t),b.rootElement.trigger("attachments:attachmentRemoved",[t]),$(".pcs-attachments-delete-dialog").ojDialog("close")},b.noDeleteDialog=function(){$(".pcs-attachments-delete-dialog").ojDialog("close")};var x={},L=$("#pcs-attachment-iframe-inline");if(L.on("load",function(){v(L)}),b.uploadAttachment=function(){if(""!==x.name){for(var t=0;t<b.attachmentList().length;t++)if(b.attachmentList()[t].filename===x.name)return void $(".pcs-attachments-dialog-error-msg").css("display","block");var n=b.bundle.pcs.attachments.dateByUserTextTmp,o={filename:x.name,fileInfoText:n,href:x.src,contentType:x.contentType,content:x.content};if("task"===b.data.mode||"process"===b.data.mode){$("#pcs-attachments-overlay").addClass("pcs-common-load-overlay");var s="Boundary_123456789_123456789",i="--"+s+"\r\n",c="\r\n--"+s+"--\r\n",l=i;l+="Content-Disposition: inline\r\n",l+="Content-Type: application/json\r\n\r\n";var d={attachmentName:encodeURI(o.filename),mimeType:o.contentType,attachmentScope:"BPM"};l+=JSON.stringify(d)+"\r\n",l+=i,l+="Content-Transfer-Encoding: binary\r\n\r\n",l+=o.content,l+=c;var p="multipart/mixed; boundary="+s;a.uploadAttachment(b.data.mode,b.data.id,l,p).done(function(t){b.attachmentList.unshift(o),b.rootElement.trigger("attachments:attachmentUploaded",[o]);var n=b.bundle.pcs.attachments.upload_attachment_success;n=e.Translations.applyParameters(n,{0:o.filename}),$("#pcs-attachments-success-msg",b.rootElement).text(n),$("#pcs-attachments-success-msg-container",b.rootElement).show().delay(5e3).fadeOut(2e3),$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay")}).fail(function(e,t,n){var a=b.bundle.pcs.attachments.upload_attachment_error;r(e,a)})}else b.attachmentList.unshift(o),b.rootElement.trigger("attachments:attachmentUploaded",[o])}$(".pcs-attachments-modalDialog").ojDialog("close")},b.data.attachments)for(var j=0;j<b.data.attachments.length;j++){var C=null,D=function(e,t){for(var n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);var o=new Blob([n],{type:t});return null!==C&&window.URL.revokeObjectURL(C),C=window.URL.createObjectURL(o)},k=b.data.attachments[j];""===k.href&&(k.href=D(k.content,k.contentType)),b.attachmentList.unshift(k)}$("#pcs-attachments-fileControl").change(function(e){var t=$(".pcs-attachments-upload-btn");t.ojButton("option","disabled",!0),b.isSizeLimitExceeding(!1);var n=e.target.files[0],a=b.showDcsFolders()?15e6:5e6;if(n&&n.size<=a){var o=new FileReader;o.onload=function(e){x.name=n.name,x.content=g(e.target.result),""===n.type?x.contentType="application/octet-stream":x.contentType=n.type,x.size=n.size,x.src=window.URL.createObjectURL(n)},o.readAsArrayBuffer(n),t.ojButton("option","disabled",!1)}else b.isSizeLimitExceeding(!0),y.log("Failed to load file")}),b.handleDialogClose=function(){b.isSizeLimitExceeding(!1)},b.dispose=function(){y.log("dispose in attachment Containor"),u(),$(b.rootElement).off(),$("#pcs-attachment-iframe-inline").off()},b.viewAttachment=function(e,n){var o,s,i;if(t.isObservable(e.href)){var r=$(n.currentTarget),c=function(e,t){var n=new Blob([t],{type:e.contentType}),a=window.URL.createObjectURL(n);e.href(a),e.content=g(t),$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay"),window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(n,e.filename):r[0].click()};if("#"===e.href())return $("#pcs-attachments-overlay").addClass("pcs-common-load-overlay"),a.getAttachmentStream(e.serverUri,e,c,r),!1;if(window.navigator.msSaveOrOpenBlob){for(o=new Uint8Array(e.content.length),i=0;i<e.content.length;i++)o[i]=e.content.charCodeAt(i);return s=new Blob([o],{type:e.contentType}),window.navigator.msSaveOrOpenBlob(s,e.filename),!1}return!0}if(window.navigator.msSaveOrOpenBlob){for(o=new Uint8Array(e.content.length),i=0;i<e.content.length;i++)o[i]=e.content.charCodeAt(i);return s=new Blob([o],{type:e.contentType}),window.navigator.msSaveOrOpenBlob(s,e.filename),!1}return!0}}return s}),define("pcs/pcs.attachments",["ojs/ojcore","knockout","jquery","!text!pcs/attachments/templates/pcs-attachments.html","ojL10n!pcs/resources/nls/pcsSnippetsResource","!text!pcs/attachments/templates/pcs-attachments-error.html","!text!pcs/attachments/view/attachmentsContainer.html","pcs/attachments/viewModel/attachmentsContainer","pcs/util/loggerUtil","jqueryui-amd/widget"],function(e,t,n,a,o,s,i,r,c){"use strict";n.widget("pcs.attachments",{options:{hideDelete:!1,hideUploadLink:!1,hideTitle:!1,attachments:[],startFolderName:"",mode:"start",id:-1,readOnly:!1,isDocsEnabled:!1,showDocsInline:!1},_isValid:function(){return"start"===this.options.mode?!0:void 0===this.options.id||""===this.options.id?!1:!0},_create:function(){function e(){var e=this;t.components.isRegistered("attachmentComponent")||t.components.register("attachmentComponent",{template:i,viewModel:r}),e.data=l,c.options.readOnly&&(e.data.hideUploadLink=!0,e.data.hideDelete=!0)}var c=this;if(void 0===n.pcsConnection)return void this.element.html("<div style='color:red'>"+o.pcs.common.pcs_connection+" </div>");if(!this._isValid())return void this.element.html(s);var l={rootElement:c.element,hideDelete:c.options.hideDelete,hideUploadLink:c.options.hideUploadLink,hideTitle:c.options.hideTitle,attachments:c.options.attachments,startFolderName:c.options.startFolderName,mode:c.options.mode,id:c.options.id,isDocsEnabled:c.options.isDocsEnabled,showDocsInline:c.options.showDocsInline},d=new e;c.model=d,this.element.html(a),t.applyBindings(d,this.element[0])},destroy:function(){n.Widget.prototype.destroy.call(this)},_destroy:function(){c.log("Destroying attachments"),this.model&&this.model.data&&this.model.data.container&&this.model.data.container.dispose()},_setOption:function(e,t){this.options[e]=t,n.Widget.prototype._setOption.apply(this,arguments)},getAttachments:function(){var e=this.model.data.container.attachmentList();return e}})});
//# sourceMappingURL=pcs.attachments.js.map